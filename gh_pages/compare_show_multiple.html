<body onload="load();">
    <script src="https://assets.crowd.aws/crowd-html-elements.js"></script>
    <crowd-form answer-format="flatten-objects" style="margin:5px">
        <h1>Which image best preserves content and style?</h1>
<div>
<p><b>I. Test Description</b></p>

<p>You are given five independent image sets, each with a <b>Content</b> and a <b>Style</b> reference images. Based on them, four different images, <b>Image 1</b> to <b>Image 4</b>, are generated such that they keep the content of the <b>Content Image</b> and the style of the <b>Style image</b>. Take a close look at them and provide a ranking from <b>1</b> to <b>4</b>, where <b>1</b> is the image that <b>worst depicts the content and style of the reference images</b> and <b>4</b> is the image that <b>best depicts the content and style of the reference images</b>. Your score should take into consideration the following profiles:</p>

<ul>
	<li>Are the objects from the content image clearly described?</li>
	<li>Are the object textures and color pallette from the style image preserved?</li>
	<li>Do the image suffers from distorsions or inconsistent shadowing?</li>
</ul>

<p><b>Notice that scores cannot be repeated for a given set (the four images of a set must have different scores)</b>. Additionally, please include any comments regarding your choice.</p>
</div>

<div>
<p><b>II. Instructions</b></p>

<p>Hover your mouse over the image and <b>scroll</b> to zoom in or out. You can also <b>click and drag</b> to explore the image.</p>
</div>

<p><b>III. Images of Interest</b></p>
<p><b>1. Image Set 1</b></p>
<table style="width:100%">
	<tbody>
		<tr>
			<th><b>Content Image</b></th>
			<th><b>Style Image</b></th>
		</tr>
		<tr>
			<th><img id="ref1_1" src="./images/compare/ADE_train_00000062.jpg" style="height:300px;margin:2px" /></th>
			<th><img id="ref1_2" src="./images/compare/ADE_val_00000098.jpg" style="height:300px;margin:2px" /></th>
		</tr>
	</tbody>
</table>

<div>&nbsp;
<table style="width:100%">
	<tbody>
		<tr>
			<th><b>Image 1</b></th>
			<th><b>Image 2</b></th>
			<th><b>Image 3</b></th>
			<th><b>Image 4</b></th>
		</tr>
		<tr>
			<th><img id="img1_1" src="./images/compare/ADE_train_00000062_ADE_val_00000098_closed.jpg" style="width:300px;margin:1px" /></th>
			<th><img id="img1_2" src="./images/compare/ADE_train_00000062_ADE_val_00000098_deep.png" style="width:300px;margin:1px" /></th>
			<th><img id="img1_3" src="./images/compare/ADE_train_00000062_ADE_val_00000098_wct2.jpg" style="width:300px;margin:1px" /></th>
			<th><img id="img1_4" src="./images/compare/ADE_train_00000062_ADE_val_00000098_poisson.jpg" style="width:300px;margin:1px" /></th>
		</tr>
		<tr>
			<th><b>Image 1 Score:</b></th>
			<th><b>Image 2 Score:</b></th>
			<th><b>Image 3 Score:</b></th>
			<th><b>Image 4 Score:</b></th>
		</tr>
		<tr>
			<th>
			<div class="options"><crowd-radio-group><crowd-radio-button name="1_1a"><b><font size="1">1.</font></b></crowd-radio-button><crowd-radio-button name="1_1b"><b><font size="1">2.</font></b></crowd-radio-button><crowd-radio-button name="1_1c"><b><font size="1">3.</font></b></crowd-radio-button><crowd-radio-button name="1_1d"><b><font size="1">4.</font></b></crowd-radio-button></div>
			</th>
			<th>
			<div class="options"><crowd-radio-group><crowd-radio-button name="1_2a"><b><font size="1">1.</font></b></crowd-radio-button><crowd-radio-button name="1_2b"><b><font size="1">2.</font></b></crowd-radio-button><crowd-radio-button name="1_2c"><b><font size="1">3.</font></b></crowd-radio-button><crowd-radio-button name="1_2d"><b><font size="1">4.</font></b></crowd-radio-button></div>
			</th>
			<th>
			<div class="options"><crowd-radio-group><crowd-radio-button name="1_3a"><b><font size="1">1.</font></b></crowd-radio-button><crowd-radio-button name="1_3b"><b><font size="1">2.</font></b></crowd-radio-button><crowd-radio-button name="1_3c"><b><font size="1">3.</font></b></crowd-radio-button><crowd-radio-button name="1_3d"><b><font size="1">4.</font></b></crowd-radio-button></div>
			</th>
			<th>
			<div class="options"><crowd-radio-group><crowd-radio-button name="1_4a"><b><font size="1">1.</font></b></crowd-radio-button><crowd-radio-button name="1_4b"><b><font size="1">2.</font></b></crowd-radio-button><crowd-radio-button name="1_4c"><b><font size="1">3.</font></b></crowd-radio-button><crowd-radio-button name="1_4d"><b><font size="1">4.</font></b></crowd-radio-button></div>
			</th>
		</tr>
	</tbody>
</table>
</div>

<p><b>2. Image Set 2</b></p>
<table style="width:100%">
	<tbody>
		<tr>
			<th><b>Content Image</b></th>
			<th><b>Style Image</b></th>
		</tr>
		<tr>
			<th><img id="ref2_1" src="./images/compare/ADE_train_00003382.jpg" style="height:300px;margin:2px" /></th>
			<th><img id="ref2_2" src="./images/compare/ADE_val_00000139.jpg" style="height:300px;margin:2px" /></th>
		</tr>
	</tbody>
</table>

<div>&nbsp;
<table style="width:100%">
	<tbody>
		<tr>
			<th><b>Image 1</b></th>
			<th><b>Image 2</b></th>
			<th><b>Image 3</b></th>
			<th><b>Image 4</b></th>
		</tr>
		<tr>
			<th><img id="img2_1" src="./images/compare/ADE_train_00003382_ADE_val_00000139_wct2.jpg" style="width:300px;margin:1px" /></th>
			<th><img id="img2_2" src="./images/compare/ADE_train_00003382_ADE_val_00000139_closed.jpg" style="width:300px;margin:1px" /></th>
			<th><img id="img2_3" src="./images/compare/ADE_train_00003382_ADE_val_00000139_deep.png" style="width:300px;margin:1px" /></th>
			<th><img id="img2_4" src="./images/compare/ADE_train_00003382_ADE_val_00000139_poisson.jpg" style="width:300px;margin:1px" /></th>
		</tr>
		<tr>
			<th><b>Image 1 Score:</b></th>
			<th><b>Image 2 Score:</b></th>
			<th><b>Image 3 Score:</b></th>
			<th><b>Image 4 Score:</b></th>
		</tr>
		<tr>
			<th>
			<div class="options"><crowd-radio-group><crowd-radio-button name="2_1a"><b><font size="1">1.</font></b></crowd-radio-button><crowd-radio-button name="2_1b"><b><font size="1">2.</font></b></crowd-radio-button><crowd-radio-button name="2_1c"><b><font size="1">3.</font></b></crowd-radio-button><crowd-radio-button name="2_1d"><b><font size="1">4.</font></b></crowd-radio-button></div>
			</th>
			<th>
			<div class="options"><crowd-radio-group><crowd-radio-button name="2_2a"><b><font size="1">1.</font></b></crowd-radio-button><crowd-radio-button name="2_2b"><b><font size="1">2.</font></b></crowd-radio-button><crowd-radio-button name="2_2c"><b><font size="1">3.</font></b></crowd-radio-button><crowd-radio-button name="2_2d"><b><font size="1">4.</font></b></crowd-radio-button></div>
			</th>
			<th>
			<div class="options"><crowd-radio-group><crowd-radio-button name="2_3a"><b><font size="1">1.</font></b></crowd-radio-button><crowd-radio-button name="2_3b"><b><font size="1">2.</font></b></crowd-radio-button><crowd-radio-button name="2_3c"><b><font size="1">3.</font></b></crowd-radio-button><crowd-radio-button name="2_3d"><b><font size="1">4.</font></b></crowd-radio-button></div>
			</th>
			<th>
			<div class="options"><crowd-radio-group><crowd-radio-button name="2_4a"><b><font size="1">1.</font></b></crowd-radio-button><crowd-radio-button name="2_4b"><b><font size="1">2.</font></b></crowd-radio-button><crowd-radio-button name="2_4c"><b><font size="1">3.</font></b></crowd-radio-button><crowd-radio-button name="2_4d"><b><font size="1">4.</font></b></crowd-radio-button></div>
			</th>
		</tr>
	</tbody>
</table>
</div>

<p><b>3. Image Set 3</b></p>
<table style="width:100%">
	<tbody>
		<tr>
			<th><b>Content Image</b></th>
			<th><b>Style Image</b></th>
		</tr>
		<tr>
			<th><img id="ref3_1" src="./images/compare/ADE_train_00006881.jpg" style="height:300px;margin:2px" /></th>
			<th><img id="ref3_2" src="./images/compare/ADE_val_00000313.jpg" style="height:300px;margin:2px" /></th>
		</tr>
	</tbody>
</table>

<div>&nbsp;
<table style="width:100%">
	<tbody>
		<tr>
			<th><b>Image 1</b></th>
			<th><b>Image 2</b></th>
			<th><b>Image 3</b></th>
			<th><b>Image 4</b></th>
		</tr>
		<tr>
			<th><img id="img3_1" src="./images/compare/ADE_train_00006881_ADE_val_00000313_poisson.jpg" style="width:300px;margin:1px" /></th>
			<th><img id="img3_2" src="./images/compare/ADE_train_00006881_ADE_val_00000313_deep.png" style="width:300px;margin:1px" /></th>
			<th><img id="img3_3" src="./images/compare/ADE_train_00006881_ADE_val_00000313_closed.jpg" style="width:300px;margin:1px" /></th>
			<th><img id="img3_4" src="./images/compare/ADE_train_00006881_ADE_val_00000313_wct2.jpg" style="width:300px;margin:1px" /></th>
		</tr>
		<tr>
			<th><b>Image 1 Score:</b></th>
			<th><b>Image 2 Score:</b></th>
			<th><b>Image 3 Score:</b></th>
			<th><b>Image 4 Score:</b></th>
		</tr>
		<tr>
			<th>
			<div class="options"><crowd-radio-group><crowd-radio-button name="3_1a"><b><font size="1">1.</font></b></crowd-radio-button><crowd-radio-button name="3_1b"><b><font size="1">2.</font></b></crowd-radio-button><crowd-radio-button name="3_1c"><b><font size="1">3.</font></b></crowd-radio-button><crowd-radio-button name="3_1d"><b><font size="1">4.</font></b></crowd-radio-button></div>
			</th>
			<th>
			<div class="options"><crowd-radio-group><crowd-radio-button name="3_2a"><b><font size="1">1.</font></b></crowd-radio-button><crowd-radio-button name="3_2b"><b><font size="1">2.</font></b></crowd-radio-button><crowd-radio-button name="3_2c"><b><font size="1">3.</font></b></crowd-radio-button><crowd-radio-button name="3_2d"><b><font size="1">4.</font></b></crowd-radio-button></div>
			</th>
			<th>
			<div class="options"><crowd-radio-group><crowd-radio-button name="3_3a"><b><font size="1">1.</font></b></crowd-radio-button><crowd-radio-button name="3_3b"><b><font size="1">2.</font></b></crowd-radio-button><crowd-radio-button name="3_3c"><b><font size="1">3.</font></b></crowd-radio-button><crowd-radio-button name="3_3d"><b><font size="1">4.</font></b></crowd-radio-button></div>
			</th>
			<th>
			<div class="options"><crowd-radio-group><crowd-radio-button name="3_4a"><b><font size="1">1.</font></b></crowd-radio-button><crowd-radio-button name="3_4b"><b><font size="1">2.</font></b></crowd-radio-button><crowd-radio-button name="3_4c"><b><font size="1">3.</font></b></crowd-radio-button><crowd-radio-button name="3_4d"><b><font size="1">4.</font></b></crowd-radio-button></div>
			</th>
		</tr>
	</tbody>
</table>
</div>

<p><b>4. Image Set 4</b></p>
<table style="width:100%">
	<tbody>
		<tr>
			<th><b>Content Image</b></th>
			<th><b>Style Image</b></th>
		</tr>
		<tr>
			<th><img id="ref4_1" src="./images/compare/ADE_train_00011215.jpg" style="height:300px;margin:2px" /></th>
			<th><img id="ref4_2" src="./images/compare/ADE_val_00000516.jpg" style="height:300px;margin:2px" /></th>
		</tr>
	</tbody>
</table>

<div>&nbsp;
<table style="width:100%">
	<tbody>
		<tr>
			<th><b>Image 1</b></th>
			<th><b>Image 2</b></th>
			<th><b>Image 3</b></th>
			<th><b>Image 4</b></th>
		</tr>
		<tr>
			<th><img id="img4_1" src="./images/compare/ADE_train_00011215_ADE_val_00000516_poisson.jpg" style="width:300px;margin:1px" /></th>
			<th><img id="img4_2" src="./images/compare/ADE_train_00011215_ADE_val_00000516_deep.png" style="width:300px;margin:1px" /></th>
			<th><img id="img4_3" src="./images/compare/ADE_train_00011215_ADE_val_00000516_closed.jpg" style="width:300px;margin:1px" /></th>
			<th><img id="img4_4" src="./images/compare/ADE_train_00011215_ADE_val_00000516_wct2.jpg" style="width:300px;margin:1px" /></th>
		</tr>
		<tr>
			<th><b>Image 1 Score:</b></th>
			<th><b>Image 2 Score:</b></th>
			<th><b>Image 3 Score:</b></th>
			<th><b>Image 4 Score:</b></th>
		</tr>
		<tr>
			<th>
			<div class="options"><crowd-radio-group><crowd-radio-button name="4_1a"><b><font size="1">1.</font></b></crowd-radio-button><crowd-radio-button name="4_1b"><b><font size="1">2.</font></b></crowd-radio-button><crowd-radio-button name="4_1c"><b><font size="1">3.</font></b></crowd-radio-button><crowd-radio-button name="4_1d"><b><font size="1">4.</font></b></crowd-radio-button></div>
			</th>
			<th>
			<div class="options"><crowd-radio-group><crowd-radio-button name="4_2a"><b><font size="1">1.</font></b></crowd-radio-button><crowd-radio-button name="4_2b"><b><font size="1">2.</font></b></crowd-radio-button><crowd-radio-button name="4_2c"><b><font size="1">3.</font></b></crowd-radio-button><crowd-radio-button name="4_2d"><b><font size="1">4.</font></b></crowd-radio-button></div>
			</th>
			<th>
			<div class="options"><crowd-radio-group><crowd-radio-button name="4_3a"><b><font size="1">1.</font></b></crowd-radio-button><crowd-radio-button name="4_3b"><b><font size="1">2.</font></b></crowd-radio-button><crowd-radio-button name="4_3c"><b><font size="1">3.</font></b></crowd-radio-button><crowd-radio-button name="4_3d"><b><font size="1">4.</font></b></crowd-radio-button></div>
			</th>
			<th>
			<div class="options"><crowd-radio-group><crowd-radio-button name="4_4a"><b><font size="1">1.</font></b></crowd-radio-button><crowd-radio-button name="4_4b"><b><font size="1">2.</font></b></crowd-radio-button><crowd-radio-button name="4_4c"><b><font size="1">3.</font></b></crowd-radio-button><crowd-radio-button name="4_4d"><b><font size="1">4.</font></b></crowd-radio-button></div>
			</th>
		</tr>
	</tbody>
</table>
</div>

<p><b>5. Image Set 5</b></p>
<table style="width:100%">
	<tbody>
		<tr>
			<th><b>Content Image</b></th>
			<th><b>Style Image</b></th>
		</tr>
		<tr>
			<th><img id="ref5_1" src="./images/compare/ADE_train_00010202.jpg" style="height:300px;margin:2px" /></th>
			<th><img id="ref5_2" src="./images/compare/ADE_val_00001487.jpg" style="height:300px;margin:2px" /></th>
		</tr>
	</tbody>
</table>

<div>&nbsp;
<table style="width:100%">
	<tbody>
		<tr>
			<th><b>Image 1</b></th>
			<th><b>Image 2</b></th>
			<th><b>Image 3</b></th>
			<th><b>Image 4</b></th>
		</tr>
		<tr>
			<th><img id="img5_1" src="./images/compare/ADE_train_00010202_ADE_val_00001487_wct2.jpg" style="width:300px;margin:1px" /></th>
			<th><img id="img5_2" src="./images/compare/ADE_train_00010202_ADE_val_00001487_closed.jpg" style="width:300px;margin:1px" /></th>
			<th><img id="img5_3" src="./images/compare/ADE_train_00010202_ADE_val_00001487_deep.png" style="width:300px;margin:1px" /></th>
			<th><img id="img5_4" src="./images/compare/ADE_train_00010202_ADE_val_00001487_poisson.jpg" style="width:300px;margin:1px" /></th>
		</tr>
		<tr>
			<th><b>Image 1 Score:</b></th>
			<th><b>Image 2 Score:</b></th>
			<th><b>Image 3 Score:</b></th>
			<th><b>Image 4 Score:</b></th>
		</tr>
		<tr>
			<th>
			<div class="options"><crowd-radio-group><crowd-radio-button name="5_1a"><b><font size="1">1.</font></b></crowd-radio-button><crowd-radio-button name="5_1b"><b><font size="1">2.</font></b></crowd-radio-button><crowd-radio-button name="5_1c"><b><font size="1">3.</font></b></crowd-radio-button><crowd-radio-button name="5_1d"><b><font size="1">4.</font></b></crowd-radio-button></div>
			</th>
			<th>
			<div class="options"><crowd-radio-group><crowd-radio-button name="5_2a"><b><font size="1">1.</font></b></crowd-radio-button><crowd-radio-button name="5_2b"><b><font size="1">2.</font></b></crowd-radio-button><crowd-radio-button name="5_2c"><b><font size="1">3.</font></b></crowd-radio-button><crowd-radio-button name="5_2d"><b><font size="1">4.</font></b></crowd-radio-button></div>
			</th>
			<th>
			<div class="options"><crowd-radio-group><crowd-radio-button name="5_3a"><b><font size="1">1.</font></b></crowd-radio-button><crowd-radio-button name="5_3b"><b><font size="1">2.</font></b></crowd-radio-button><crowd-radio-button name="5_3c"><b><font size="1">3.</font></b></crowd-radio-button><crowd-radio-button name="5_3d"><b><font size="1">4.</font></b></crowd-radio-button></div>
			</th>
			<th>
			<div class="options"><crowd-radio-group><crowd-radio-button name="5_4a"><b><font size="1">1.</font></b></crowd-radio-button><crowd-radio-button name="5_4b"><b><font size="1">2.</font></b></crowd-radio-button><crowd-radio-button name="5_4c"><b><font size="1">3.</font></b></crowd-radio-button><crowd-radio-button name="5_4d"><b><font size="1">4.</font></b></crowd-radio-button></div>
			</th>
		</tr>
	</tbody>
</table>
</div>

        <p><b><em>Additional Comments: </em></b> </p>
        <p><textarea id="comment_area" name="comment" style="width:90%; height:100px"></textarea></p>
        
    </crowd-form>
</body>

<script src="https://assets.crowd.aws/crowd-html-elements.js"></script>
<script>
/*!
	Wheelzoom 1.1.1
	license: MIT
	https://luperi.github.io/wheelzoom/
*/

// create CustomEvent to override window.Event in unsupported browsers
(function () {
	function CustomEvent ( event, params ) {
		params = params || { bubbles: false, cancelable: false, detail: undefined };
		var evt = document.createEvent( 'CustomEvent' );
		evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );
		return evt;
	}

	CustomEvent.prototype = window.Event.prototype;
	window.CustomEvent = CustomEvent;
})();

// create cross browser triggerEvent function
window.triggerEvent = function(target, eventName, params) {
	if (params) {
		var e = new CustomEvent(eventName, {
			'detail': params
		});
	} else {
		try {
			var e = new Event(eventName);
		} catch (err) {
			var e = new CustomEvent(eventName);
		}
	}

	return target.dispatchEvent(e, params);
};

window.wheelzoom = (function(){
	var defaults = {
		zoom: 0.10,
		maxZoom: -1
	};

	var canvas = document.createElement('canvas');

	var main = function(img, options){
		if (!img || !img.nodeName || img.nodeName !== 'IMG') { return; }

		var settings = {};
		var width;
		var height;
		var bgWidth;
		var bgHeight;
		var bgPosX;
		var bgPosY;
		var previousEvent;
		var cachedDataUrl;
		var initBgPosX;
		var initBgPosY;

		function setSrcToBackground(img) {
			img.style.backgroundImage = 'url("'+img.src+'")';
			img.style.backgroundRepeat = 'no-repeat';
			canvas.width = img.naturalWidth;
			canvas.height = img.naturalHeight;
			cachedDataUrl = canvas.toDataURL();
			img.src = cachedDataUrl;
		}

		function updateBgStyle() {
			if (bgPosX > 0) {
				bgPosX = 0;
			} else if (bgPosX < width - bgWidth) {
				bgPosX = width - bgWidth;
			}

			if (bgPosY > 0) {
				bgPosY = 0;
			} else if (bgPosY < height - bgHeight) {
				bgPosY = height - bgHeight;
			}

			img.style.backgroundSize = bgWidth+'px '+bgHeight+'px';
			img.style.backgroundPosition = bgPosX+'px '+bgPosY+'px';
		}

		function reset() {
			bgWidth = width;
			bgHeight = height;
			bgPosX = bgPosY = 0;
			updateBgStyle();
		}

		img.doZoomIn = function(propagate) {
			if (typeof propagate === 'undefined') {
				propagate = false;
			}

			doZoom(-100, propagate);
		}

		img.doZoomOut = function(propagate) {
			if (typeof propagate === 'undefined') {
				propagate = false;
			}

			doZoom(100, propagate);
		}

		function doZoom (deltaY, propagate) {
			if (typeof propagate === 'undefined') {
				propagate = false;
			}

			// zoom always at the center of the image
			var offsetX = img.width/2;
			var offsetY = img.height/2;

			// Record the offset between the bg edge and the center of the image:
			var bgCenterX = offsetX - bgPosX;
			var bgCenterY = offsetY - bgPosY;
			// Use the previous offset to get the percent offset between the bg edge and the center of the image:
			var bgRatioX = bgCenterX/bgWidth;
			var bgRatioY = bgCenterY/bgHeight;

			// Update the bg size:
			if (deltaY < 0) {
				if (settings.maxZoom == -1 || (bgWidth + bgWidth*settings.zoom) / width <= settings.maxZoom) {
					bgWidth += bgWidth*settings.zoom;
					bgHeight += bgHeight*settings.zoom;
				}
			} else {
				bgWidth -= bgWidth*settings.zoom;
				bgHeight -= bgHeight*settings.zoom;
			}

			// Take the percent offset and apply it to the new size:
			bgPosX = offsetX - (bgWidth * bgRatioX);
			bgPosY = offsetY - (bgHeight * bgRatioY);

			if (propagate) {
				if (deltaY < 0) {
					// setTimeout to handle lot of events fired
					setTimeout(function() {
						triggerEvent(img, 'wheelzoom.in', {
							zoom: bgWidth/width,
							bgPosX: bgPosX,
							bgPosY: bgPosY
						});
					}, 10);
				} else {
					// setTimeout to handle lot of events fired
					setTimeout(function() {
						triggerEvent(img, 'wheelzoom.out', {
							zoom: bgWidth/width,
							bgPosX: bgPosX,
							bgPosY: bgPosY
						});
					}, 10);
				}
			}

			// Prevent zooming out beyond the starting size
			if (bgWidth <= width || bgHeight <= height) {
				triggerEvent(img, 'wheelzoom.reset');
			} else {
				updateBgStyle();
			}
		}

		function onwheel(e) {
			var deltaY = 0;

			e.preventDefault();

			if (e.deltaY) { // FireFox 17+ (IE9+, Chrome 31+?)
				deltaY = e.deltaY;
			} else if (e.wheelDelta) {
				deltaY = -e.wheelDelta;
			}

			if (deltaY < 0) {
				img.doZoomIn(true);
			} else {
				img.doZoomOut(true);
			}
		}

		img.doDrag = function (x, y) {
			bgPosX = x;
			bgPosY = y;

			updateBgStyle();
		}

		function drag(e) {
			e.preventDefault();
			var xShift = e.pageX - previousEvent.pageX;
			var yShift = e.pageY - previousEvent.pageY;
			var x = bgPosX + xShift;
			var y = bgPosY + yShift;

			img.doDrag(x, y);

			triggerEvent(img, 'wheelzoom.drag', {
				bgPosX: bgPosX,
				bgPosY: bgPosY,
				xShift: xShift,
				yShift: yShift
			});

			previousEvent = e;
			updateBgStyle();
		}

		function removeDrag() {
			triggerEvent(img, 'wheelzoom.dragend', {
				x: bgPosX - initBgPosX,
				y: bgPosY - initBgPosY
			});

			document.removeEventListener('mouseup', removeDrag);
			document.removeEventListener('mousemove', drag);
		}

		// Make the background draggable
		function draggable(e) {
			triggerEvent(img, 'wheelzoom.dragstart');

			e.preventDefault();
			previousEvent = e;
			document.addEventListener('mousemove', drag);
			document.addEventListener('mouseup', removeDrag);
		}

		function load() {
			if (img.src === cachedDataUrl) return;

			var computedStyle = window.getComputedStyle(img, null);

			width = parseInt(computedStyle.width, 10);
			height = parseInt(computedStyle.height, 10);
			bgWidth = width;
			bgHeight = height;
			bgPosX = bgPosY = initBgPosX = initBgPosY = 0;

			setSrcToBackground(img);

			img.style.backgroundSize =  width+'px '+height+'px';
			img.style.backgroundPosition = '0 0';

			img.addEventListener('wheelzoom.reset', reset);
			img.addEventListener('wheelzoom.destroy', destroy);
			img.addEventListener('wheel', onwheel);
			img.addEventListener('mousedown', draggable);
		}

		var destroy = function (originalProperties) {
			img.removeEventListener('wheelzoom.destroy', destroy);
			img.removeEventListener('wheelzoom.reset', reset);
			img.removeEventListener('mouseup', removeDrag);
			img.removeEventListener('mousemove', drag);
			img.removeEventListener('mousedown', draggable);
			img.removeEventListener('wheel', onwheel);

			img.style.backgroundImage = originalProperties.backgroundImage;
			img.style.backgroundRepeat = originalProperties.backgroundRepeat;
			img.src = originalProperties.src;
		}.bind(null, {
			backgroundImage: img.style.backgroundImage,
			backgroundRepeat: img.style.backgroundRepeat,
			src: img.src
		});

		options = options || {};

		Object.keys(defaults).forEach(function(key){
			settings[key] = typeof options[key] !== 'undefined' ? options[key] : defaults[key];
		});

		var t = setInterval(function(){
			if (img.complete) {
				load();
			}

			clearInterval(t);
		}, 100);
	};

	// Do nothing in IE8
	if (typeof window.getComputedStyle !== 'function') {
		return function(elements) {
			return elements;
		};
	} else {
		return function(elements, options) {
			if (elements && elements.length) {
				for (var i=0;i<elements.length;i++) {
					main(elements[i], options);
				}
			} else if (elements && elements.nodeName) {
				main(elements, options);
			}

			return elements;
		};
	}
}());
</script>
<script>
	function load() {
		var zoomIn  = -100;
		var zoomOut = 100;
		
		images = wheelzoom(document.querySelectorAll('img'), {zoom: 0.1, maxZoom: 10});
		
		images[0].addEventListener('wheelzoom.in', function(e) {
			document.getElementById('label1').innerHTML = '"wheelzoom.in"';
		});
		images[0].addEventListener('wheelzoom.out', function(e) {
			document.getElementById('label1').innerHTML = '"wheelzoom.out"';
		});
		images[0].addEventListener('wheelzoom.dragstart', function(e) {
			document.getElementById('label1').innerHTML = '"wheelzoom.dragstart"';
		});
		images[0].addEventListener('wheelzoom.drag', function(e) {
			document.getElementById('label1').innerHTML = '"wheelzoom.drag"';
		});
		images[0].addEventListener('wheelzoom.dragend', function(e) {
			document.getElementById('label1').innerHTML = '"wheelzoom.dragend"';
		});
		
		images[1].addEventListener('wheelzoom.in', function(e) {
			document.getElementById('label2').innerHTML = '"wheelzoom.in"';
		});
		images[1].addEventListener('wheelzoom.out', function(e) {
			document.getElementById('label2').innerHTML = '"wheelzoom.out"';
		});
		images[1].addEventListener('wheelzoom.dragstart', function(e) {
			document.getElementById('label2').innerHTML = '"wheelzoom.dragstart"';
		});
		images[1].addEventListener('wheelzoom.drag', function(e) {
			document.getElementById('label2').innerHTML = '"wheelzoom.drag"';
		});
		images[1].addEventListener('wheelzoom.dragend', function(e) {
			document.getElementById('label2').innerHTML = '"wheelzoom.dragend"';
		});
	}
</script>
 
